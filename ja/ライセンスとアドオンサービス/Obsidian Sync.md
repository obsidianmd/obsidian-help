Obsidian Sync™は様々なデバイスの保管庫間でノートを同期できる有料サービスです。

### Obsidian Syncの仕組み

Obsidian Syncの仕組みは非常にシンプルです。複数のデバイスから同一のリモート保管庫へと接続すると、Obsidianに除外するように設定したファイルやフォルダを除いて、あらゆる変更は各デバイスのローカル保管庫の間で自動的に同期されます。

### 機能

現在、Obsidian Syncでは次の機能を提供しています。

- エンドツーエンド暗号化
- Obsidianに統合されたバージョン履歴
- 削除したファイルの確認と復元
- 設定、テーマ、CSSスニペット、プラグインとプラグイン設定の同期
- 選択的な同期
	- 特定のフォルダの除外
	- 画像、音声、動画、PDFとサポートされていないファイルを同期するかどうかの切り替え
- 複数のリモート保管庫の切り替え

将来的に、Obsidian Syncでは次の機能の提供を予定しています。

- 保管庫のシェア


### Obsidian Syncプラグインの有効化

｢設定｣ → ｢コアプラグイン｣から｢同期｣のプラグインをオンにすることでObsidian Syncを有効化できます。

###  リモート保管庫のセットアップ

同期を開始するには、まずは暗号化されたデータを保存するためのリモート保管庫を作成する必要があります。

警告: 同一の保管庫を同期するためにObsidian Syncとサードパーティの同期サービスの同時利用することは推奨していません。[[#サードパーティの同期サービス|これについては後で説明します]]。

リモート保管庫を作成するには、｢設定｣ → ｢同期｣ → ｢リモート保管庫の選択｣ → ｢選択｣ → ｢保管庫を作成｣を行ってください。

リモート保管庫を作成したら、隣にある｢接続｣ボタンをクリックすれば保管庫をすぐに接続できます。

接続後、すぐに同期を開始するか、除外するフォルダの設定をするかを選択できます。

##### 暗号化パスワードの設定

デフォルトでは、保管庫用に暗号化パスワードを設定する必要があります。このパスワードはユーザーデータの暗号化と復号化に利用されるためきわめて重要です。

暗号化された保管庫の同期をセットアップする際にはパスワードの入力が毎回要求されます。==パスワードを忘れたり無くしてしまった場合には、ユーザーデータは暗号化され使用できない状態のままとなります。その場合、パスワードや暗号化されたデータはObsidian Syncの運営側から復元することはできません。==ローカルファイルはこれに関して影響を受けることはありません。

｢カスタムエンドツーエンドパスワード｣オプションをオフにすることで、暗号キーの管理を私たちに任せることも可能です。これにより、依然として高いセキュリティを保ちつつ、パスワードを覚える必要なく快適に利用することが可能となります。

### 同期ステータスの確認

リモート保管庫の接続後に、現在の同期ステータスを下のステータスバーから確認できます。ステータスアイコンにカーソルを合わせることで、現在のステータスの詳細を見ることができます。

ステータスアイコンをクリックするとショートカットとして同期設定が開きます。

### バージョン履歴

ノートを編集する際に、約10秒ごとにバージョンが保存されます。==バージョン履歴はノートに関してのみ利用可能であり、アタッチメントについては利用できません。==

ファイルエクスプローラのペインでファイルを右クリックするとバージョン履歴を見ることができます。このオプションはオプションメニューからも利用できます。

バージョン履歴画面の左列からバージョンを選択した後は、｢復元｣ボタンをクリックすることでファイルを復元できます。

### ファイルの削除

ファイルの削除後、｢設定｣ → ｢同期｣ → ｢ファイルの削除｣ → ｢閲覧｣から削除したファイルを閲覧できます。

削除したファイルをクリックするとバージョン履歴が開きます。そこからファイルを前のバージョンに復元するか選択できます。

### 選択的同期

フォルダやファイルの種類によってファイルの選択的同期が可能です。==選択的同期は将来の変更にのみ適用されます。すでにアップロードされているファイルに関しては除外するように選択したとしても削除されません。同期プロセスを開始する前に必ず設定してください。==

##### フォルダの除外

｢設定｣ → ｢除外フォルダ｣からフォルダのチェックを外すことで、それらのフォルダを同期しないように管理できます。

除外フォルダは変更のアップロードとダウンロードの両方において無視されます。

#### ファイルの種類

｢設定｣ → ｢同期｣ → ｢選択的同期｣から画像、音声、動画、PDFとサポートされていないファイルの同期を行うかどうかの切り替えが選択できます。

### 同期設定

ノートと添付ファイルの同期に加えて、Obsidian Syncでは以下のファイについての独立した同期方法を提供しています。
- エディタ設定、ファイルとリンクの設定を含むアプリのメイン設定
- ダークモードや選択されたテーマと有効化されているスニペットを含む外観設定
- ダウンロードされたテーマとスニペット
- ホットキー
- コアプラグインのどれが有効化されているか
- コアプラグインの設定
- コミュニティプラグインのどれが有効化されているか
- ダウンロード･インストール済みのコミュニティプラグインとそれらのプラグイン設定

あなたのユースケースに最適なリモート保管庫の同期方法を選択することができます。

Obsidianの同期された設定はアプリケーションを再起動するか保管庫をリロードするまで反映されないことに注意してください。モバイル版ではアプリを再起動することがよくあるために通常これが問題になることはありません。しかし、デスクトップデバイスでセットした設定は他のデバイスに同期されても、それらの設定は次に再起動するまでは反映されません。

設定フォルダについて `.obsidian` 以外のフォルダを優先にしている場合には、同期プラグインは選択している設定フォルダを考慮して同期します。この機能をうまく活用して各種設定を同期するためにリモート保管庫内に異なる設定プロファイルを作成することができます。よくあるユースケースとしては、モバイルデバイスとデスクトップデバイス間で異なる設定プロファイルを使用するなどが挙げられます。

#### バージョン履歴の設定

何かしらのエラーが発生して設定の一部を損失してしまった場合には、同期プラグインの｢設定のバージョン履歴｣項目から影響を受けた設定をいつでも元に戻すことが可能です。

### サードパーティの同期サービス

Obsidian Syncを利用中のデバイス間で同期されている保管庫に対してDropbox、Google Drive、OneDrive、iCloudといったサードパーティの同期サービスを同時に使用して同期することは推奨していません。同時利用は競合やファイルの重複などを引き起こし、最悪の場合にはファイル破損に至る可能性があります。

2つのデバイス間においてObsidian Syncとサードパーティの同期サービスの両方で保管庫を同期するように設定している場合には、次の事態が引き起こります。
- Obsidian Syncが**競合に勝り**ファイルを先に同期する場合、サードパーティの同期サービスが**競合コピー**を生成することになります。
- サードパーティの同期サービスが**競合に勝り**ファイルを先に同期する場合、Obsidian Syncはわずかに異なる2つのバージョンをマージしようと試みますが、これによってユーザーが入力した最後の数文字がロールバックすることがしばしば起こります。

サードパーティの同期サービスを利用して保管庫のバックアップを保持したい場合には、主要な単一のデバイス上で同期サービスプロバイダーをセットアップすることで依然としてそれを実現できます。しかし、2つ目のデバイス上ではできません。これによってサードパーティの同期サービスがObsidian Syncと競合しないように保証できます。

### FAQ

##### エンドツーエンド暗号化とは何ですか？

エンドツーエンド暗号化では、データがユーザーの利用しているデバイスから離れた際に暗号化が開始されます。その後、同期中デバイスの一つに戻ってきた際には暗号キーによってのみデータが復号化されます。

私たちはユーザーのデータを読み取る能力を持たず、ユーザーが利用しているインターネットサービスプロバイダーのような潜在的な盗聴者も同様にデータを読み取ることはできません。

稀なケースとしてサーバーで完全に障害が起きてしまった場合には、データは暗号化されたままの状態となりパスワードなしではファイルを復号化できなくなります。

##### リモート保管庫はいくつ持つことができますか？

Obsidian Syncでは各アカウントごとに最大で5つのリモート保管庫を持つことができます。

##### バージョン履歴はどのくらいの間保持されますか？

バージョン履歴に関しては、こちらがクリーンアップするまでに最大1年間保持されます。

##### 各リモート保管庫はどのくらいの大きさにできますか？

現在、各リモート保管庫につき最大4GBまでのデータ保存が可能です(バージョン履歴を含みます)。

##### ハードディスク上においてもデータは暗号化されますか？

いいえ、ユーザーのデータは依然としてハードディスク上のプレーンテキストのままとなります。他にコンピューターを使用する人がいるために暗号化したいような場合には、ディスク暗号化のソリューションを探す必要があります。

##### サブスクリプションの有効期限が切れた後でどのくらい期間データは保持されますか？

リモート保管庫内のバージョン履歴を含むユーザーのデータはサブスクリプションの有効期限が切れた後から1ヶ月間は保持されます。

1ヶ月以内にサブスクリプションを更新する限り、利用に関する影響はありません。

##### Obsidian Syncをバックアップのソリューションとして利用することはできますか？

Obsidian Syncはバックアップサービスというよりはむしろデータの同期サービスとしてデザインされています。

バージョン履歴と共にいくつかのバックアップ機能を提供していますが、依然として追加のバックアップ方法を利用することを推奨しています。

Obsidian Syncは現在ベータテストの状態にあるので、ソフトウェアのバグや誤作動に備えてバックアップを行っておくことを強く推奨しています。

##### 暗号化のパスワードは自分自身で選ぶ必要がありますか？

最も強いセキュリティレベルとプラバシーが必要な場合には、パスワードをご自身で決める必要があります。これによって、パスワードを知らない人間がユーザーデータを読み取ることができないように保証できます。

暗号キーの管理を私たちに任せる場合にはより便利となり、パスワードを忘れてしまったり紛失するリスクをなくすことができます。

このオプションによってローカル保管庫が影響を受けることはありません。ローカル保管庫を適切にバックアップしている場合には、これが問題となることはないと考えられます。

##### エンドツーエンド暗号化は強固ですか？

Obsidian Syncではデータ暗号化のために業界標準のAES-256を使用しています。AES-256はオンラインバンキングで広く利用されている軍用グレードの暗号化仕様です。

興味のある方のために技術的詳細を記載しておきます。

- 使用されている鍵導出関数: scrypt with salt
- 使用されている暗号化アルゴリズム: AES-256 using GCM