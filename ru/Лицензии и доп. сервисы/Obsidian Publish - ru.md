Obsidian Publish™ это платная услуга хостинга для ваших заметок.

Инструкции по публикации Ваших заметок из приложения "Обсидиан" см. в разделе [[Публикации]].

### Приватность

Вы имеете полный контроль над тем, что публиковать через [[Публикации]]. - либо все ваше хранилище, либо только что выбранные заметки в вашем хранилище. Как и в случае с любыми заметками, которые вы выбрали **не** для публикации, вы можете быть уверены, что эти заметки остаются полностью конфиденциальными, и Obsidian Publish не имеет ни малейшего представления о них.

### Резервное копирование

Пожалуйста, обратите внимание, что Obsidian Publish не должен использоваться в качестве резервной копии вашего контента. Убедитесь, что у вас всегда есть личная резервная копия вашего сайта, используя предпочитаемый вами метод резервного копирования. Наши усилия в Obsidian Publish будут сосредоточены на функциональности, простоте использования и доступности сайта.

### Демонстрация

Есть большая вероятность, что вы уже просматриваете эту статью на нашем официальном сайте.

Если нет, то вы можете посетить ее здесь: https://publish.obsidian.md/help.

### Что включено?

Сервис "Obsidian Publish" позволяет вам создать свой сайт непосредственно из приложения "Obsidian", выбрав заметки, которые вы хотите опубликовать.

Чтобы настроить свой сайт, вы можете выбрать светлый и темный режим, а также переключиться между читаемой длиной строки и полной длиной страницы.

Существует несколько компонентов, которые могут быть включены или выключены из плагина [[Публикации]]. Изменения этих опций будут отражены на вашем опубликованном сайте после очистки кэша, как правило, в течение 5 минут.

##### Навигация

Включение этого параметра добавляет боковую панель навигации, отображающую все опубликованные страницы и папки, в которых они находятся. Пользователи увидят, что текущая открытая заметка выделена, и смогут щелкнуть по любой другой заметке для навигации.

##### Панель поиска

Добавляет строку поиска на страницу. Эта панель может быть использована для поиска страниц, псевдонимов и заголовков внутри страниц. В настоящее время она не осуществляет поиск по полному текстовому содержанию сайта.

##### Графический вид

Отображает локальный граф открываемой в данный момент страницы. При этом используется тот же самый движок рендеринга, что и плагин [[Граф]] в Obsidian.

##### Оглавление

Отображает оглавление открытой в данный момент страницы. Список формируется из заголовков внутри страницы, подобно плагину [[Структура]]. Пользователи, перемещающиеся по заметке, увидят соответствующий заголовок, выделенный при прокрутке, и могут щелкнуть на другой заголовок для немедленной навигации к нему.

##### Обратные ссылки

Отображает раздел в конце каждой страницы под названием "Ссылающиеся на эту страницу", содержащий обратные ссылки с других страниц. Если обратных ссылок нет, раздел отображаться не будет.

##### Теги

Когда читатель нажимает на тег, он может увидеть список других страниц, которые включают в себя тот же тег.

##### Предварительный просмотр на наведении

При наведении указателя мыши на ссылки их содержимое отображается во всплывающем окне. Это работает аналогично плагину [[Предпросмотр страницы]] в Obsidian.

##### Пользовательский CSS

Для настройки стиля вашего сайта, вы можете загрузить `publish.css`. Этот файл должен быть сохранен в корневой папке вашего сайта. Вы можете использовать существующую тему и добавить некоторые дополнительные настройки для публикации в `publish.css`.

##### Favicon

Чтобы изменить favicon вашего сайта, вы можете загрузить `png` иконки любого размера в формате `favicon-32.png` или `favicon-32x32.png`. Вы также можете загрузить файл `favicon.ico`. Эти файлы могут быть сохранены в любой папке. В настоящее время (по состоянию на 2020 год) рекомендуется предоставить размеры `32×32`, `128x128`, `152×152`, `167x167`, `180x180`, `192x192` и `196x196`.

##### Пользовательский JS

Если вы хотите выполнить свой собственный JavaScript код, вы можете сделать это, загрузив `publish.js` в корневом каталоге вашего хранилища. Обратите внимание, что эти скрипты будут выполняться только для посетителей вашего пользовательского домена.

##### Запретить индексирование в поисковых системах

Эта опция добавляет мета-тег Noindex на все ваши страницы, чтобы поисковые системы, такие как Google, не индексировали ваш сайт. Обратите внимание, что поисковые системы все равно не смогут индексировать ваш сайт, если он защищен паролем.

##### Google Analytics

Если вы хотите настроить Google Analytics для вашего сайта, сначала убедитесь, что ваши местные законы и правила позволяют это. Затем, вам просто нужно поместить код отслеживания в виде `UA-XXXXX-Y` в текстовое поле, и ваш сайт будет автоматически отслеживать просмотры страниц. Обратите внимание, что Google Analytics доступен только для посетителей с вашего пользовательского домена.

При тестировании Google Analytics, пожалуйста, убедитесь, что вы отключили любые рекламные расширения браузера, такие как uBlock Origin, который блокирует работу скриптов Google Analytics.

Кроме того, Obsidian Publish на данный момент напрямую не совместим с Google Tag Manager - вы можете настроить его с помощью пользовательского javascript, если вы хотите использовать Google Tag Manager вместо Google Analytics.

### Пользовательский домен

Вы можете настроить собственный домен или субдомен для вашего сайта Obsidian Publish. В настоящее время у нас еще нет возможности предоставить SSL-сертификат от вашего имени, поэтому вам необходимо прибегнуть либо к собственному серверу с поддержкой SSL, либо настроить ваш сайт на CloudFlare, который предоставляет SSL-сертификат бесплатно.

Вы также можете настроить Obsidian Publish как subURL сайта, которым вы владеете. Например, `https://mysite.com/my-notes/`. Для этого вы должны разместить свой собственный сервер и проксировать все запросы к нашему серверу по адресу `https://publish.obsidian.md/`.

Продолжайте читать для получения подробной информации о настройке.

#### Настройка CloudFlare

Самый простой способ настроить собственный домен или субдомен - это создать учетную запись в [CloudFlare](https://cloudflare.com) и позволить CloudFlare управлять вашим доменом. Это позволит вам добавить SSL на ваш сайт бесплатно, а также обеспечить быструю работу вашего сайта в любой точке мира, откуда к нему можно получить доступ. Обычно пользователи размещают свой Obsidian Publish контент на корневом домене (например, mysite.com) или на субдомене (например, notes.mysite.com). Эти инструкции работают в обоих случаях.

1. Откройте Cloudflare для домена, в который вы хотите добавить Publish (например, mysite.com, даже если вы хотите сабдомен, например, notes.mysite.com).
2. Перейдите в DNS и нажмите кнопку Добавить запись. Выберите CNAME и в поле "Имя" введите желаемый домен или субдомен (например, notes.mysite.com). В поле "Цель" введите значение `publish-main.obsidian.md`. Не включайте в это значение ваш subURL, так как Obsidian Publish обрабатывает это из Вашей конфигурации. 
3. Перейдите в режим SSL/TLS и установите режим шифрования SSL/TLS на `Полное`. Это автоматически настроит сертификат SSL/TLS.

После того, как вы закончите настройку CloudFlare, вы можете перейти к настройкам вашего сайта в Obsidian, и установить URL для вашего домена или субдомена. Это позволит нашему серверу связать домен с вашим сайтом.

Устранение неполадок: Если ваша пользовательская настройка домена заканчивается циклом перенаправления, скорее всего, режим шифрования в CloudFlare будет "Гибким", а не "Полным".

Если вы хотите настроить `mysite.com` и `https://support.cloudflare.com/hc/en-us/articles/200172336-Creating-Page-Rules` на `Obsidian Publish`, вам нужно будет создать [Page Rule](https://support.cloudflare.com/hc/en-us/articles/200172336-Creating-Page-Rules) следующим образом:
- URL-адрес: `www.mysite.com/*
- Forward URL - 301 Permanent redirect
- Redirect URL: `https://mysite.com/$1`

Как только вы создадите правило страницы, вы также должны создать запись CNAME для `www.mysite.com` так же, как вы создали для `mysite.com`.

#### Настройка прокси/переадресации

Если вы хотите разместить свой собственный веб-сервер и настроить собственное SSL-шифрование, вы можете выбрать эту опцию. Если вы уже размещаете сайт под вашим доменом или субдоменом, вы также можете использовать эту опцию и настроить ваш сайт для загрузки вашего Obsidian Publish сайта по определенному URL-адресу, вместо того, чтобы размещать полный сайт.

Просто проксируйте все запросы по этому URL пути к `https://publish.obsidian.md/serve?url=mysite.com/my-subpath/...` и настройте параметры сайта в Obsidian на тот же URL путь.

Например, в NGINX, вы можете настроить его как:
```nginx
location /my-notes {
  proxy_pass https://publish.obsidian.md/serve?url=mysite.com/my-notes/;
  proxy_ssl_server_name on;
}
```

В Apache `.htaccess` вы можете настроить его как:
```htaccess
RewriteEngine  on
RewriteRule    "^my-notes/(.*)$"  "https://publish.obsidian.md/serve?url=mysite.com/my-notes/$1"  [L,P]
```

Если вы используете Netlify, вы можете установить как:
```
[[redirects]]
  from = "https://mysite.com/my-notes/*"
  to = "https://publish.obsidian.md/serve?url=mysite.com/my-notes/:splat"
  status = 200
  force = true
```

#### Пользовательская пост-настройка домена

После настройки пользовательского домена, если вы заходили на сайт по предыдущей ссылке `https://publish.obsidian.md/slug`, вам, возможно, придется очистить кэш браузера для некоторых вещей (например, шрифты, графики или пароль доступа), чтобы он работал должным образом. Это связано с междоменными ограничениями безопасности, которые накладываются современными браузерами. Хорошая новость заключается в том, что читатели вашего сайта никогда не должны сталкиваться с подобной проблемой, если вы разрешаете посетителям использовать только свой собственный домен.

#### Перенаправление старого сайта на пользовательский домен

Если вы хотите перенаправить пользователей со старого `publish.obsidian.md` сайта на ваш новый пользовательский домен, есть возможность включить в настройках пользовательского домена страницу, которая сделает именно это.

### Скоро будет

Obsidian Publish все еще находится в начале своего пути. Вот некоторые особенности, которые мы планируем добавить:

- Полная пользовательская поддержка домена (с предоставлением SSL-сертификатов).
- Полнотекстовый поиск.
- Больше встроенных тем.

Пожалуйста, сообщите нам, если у вас есть какие-то предложения по функциональности "Obsidian Publish", отправив [запрос на форум](https://forum.obsidian.md/).

### Цены

Цены на "Obsidian Publish" можно узнать на странице [наши цены](https://obsidian.md/pricing).

### Технические подробности

Obsidian Publish использует Cloudflare в качестве CDN (сеть доставки контента) для распространения вашего сайта по всему миру для более быстрого доступа. Это включает в себя кэширование копий файлов вашего сайта в более чем 200 центрах обработки данных, чтобы обеспечить минимальное время задержки для ваших читателей, а сайт остается быстрым и быстро загружается, даже если ваш пользователь живет далеко от наших основных серверов.

Однако это означает, что когда вы меняете настройки сайта, публикуете новый контент или убираете его из общего доступа, посетители могут не увидеть последнюю версию в течение короткого времени. В настоящее время наш кэш настроен на сохранение в течение часа, прежде чем его придется "перепроверять", чтобы убедиться в том, что контент не изменился.

Если вы только что опубликовали элементы, но все еще видите более старую версию, обычно вы можете выполнить "жесткое обновление", удерживая кнопку перезагрузки и выбрав "Жесткое обновление" в выпадающем меню. В противном случае вы можете попробовать очистить кэш браузера или отключить кэш с помощью инструментов разработчика на вкладке "Сеть".

#### Хостинг медиа-файлов

Несмотря на то, что Obsidian Publish позволяет загружать видеоклипы, он не оптимизирован для видео. Таким образом, ваши посетители могут обнаружить, что видео на вашем сайте может не доставить большого наслаждения .

Мы рекомендуем использовать соответствующий сервис видеохостинга, такой как YouTube или Vimeo, для размещения ваших видео для "Obsidian Publish". Преимущества использования правильного видео хостинга включают в себя:
- Автоматическая перекодировка гарантирует, что ваше видео может быть воспроизведено на всех мобильных устройствах независимо от того, какой формат кодирования вы использовали в исходном файле.
- Динамическая настройка качества в зависимости от доступности полосы пропускания и обеспечивает плавное воспроизведение видео без постоянных пауз для "буферизации".
- Высокоэффективное сжатие видео, гарантирующее, что посетители не будут проигрывать свои данные при просмотре вашего сайта.
- Глобальная CDN позволяет быстро загружать видео независимо от того, где находится ваш посетитель.

---

### Связанное

Подробную информацию о публикации ваших заметок см. в плагине [[Публикации]].